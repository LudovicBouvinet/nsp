{% extends "NSPArticleBundle::layout.html.twig" %} {% block title %}{{ parent() }} - Ajout Article {% endblock %} {% block css %}
    <link rel="stylesheet" href="{{ asset('bundles/nsparticle/css/ajoutArticle.css') }}"> 
{% endblock %} 

{% block body %}

<div class="interface-ajout">
    <div class="choix-selection">
        <h1>Th√®mes</h1>
        <div class="theme-choix-container">
            <div class="theme-choix"></div>
            <div class="theme-choix"></div>
            <div class="theme-choix"></div>
            <div class="theme-choix"></div>
            <div class="theme-choix"></div>
            <div class="theme-choix"></div>
        </div>
    </div>

    <div class="formulaire-ajout-article">
    {% if formArticle is defined %}
        {{ form(formArticle) }}
    {% endif %}
    </div>

    <p class="id-article">
    </p>
    
    <div class="choix-photos">
        <h1>Photos</h1>
        <div class="photo-choix-container">
            <div class="boite-photo" data-id-photo="{{ article.photos[0].id }}" data-url="{{ article.photos[0].fichier }}">
                {% if article.photos[0].format != 'n/a' %}
                    <img src="{{ asset(article.photos[0].webPath) }}"/>
                {% endif %}
            </div>
            <div class="boite-photo" data-id-photo="{{ article.photos[1].id }}" data-url="{{ article.photos[1].fichier }}">
                {% if article.photos[1].format != 'n/a' %}
                    <img src="{{ asset(article.photos[1].webPath) }}"/>
                {% endif %}
            </div>
            <div class="boite-photo" data-id-photo="{{ article.photos[2].id }}" data-url="{{ article.photos[2].fichier }}">
                {% if article.photos[2].format != 'n/a' %}
                    <img src="{{ asset(article.photos[2].webPath) }}"/>
                {% endif %}
            </div>
            <div class="boite-photo" data-id-photo="{{ article.photos[3].id }}" data-url="{{ article.photos[3].fichier }}">
                {% if article.photos[3].format != 'n/a' %}
                    <img src="{{ asset(article.photos[3].webPath) }}"/>
                {% endif %}
            </div>
            <div class="boite-photo" data-id-photo="{{ article.photos[4].id }}" data-url="{{ article.photos[4].fichier }}">
                {% if article.photos[4].format != 'n/a' %}
                    <img src="{{ asset(article.photos[4].webPath) }}"/>
                {% endif %}
            </div>
            <div class="boite-photo" data-id-photo="{{ article.photos[5].id }}" data-url="{{ article.photos[5].fichier }}">
                {% if article.photos[5].format != 'n/a' %}
                    <img src="{{ asset(article.photos[5].webPath) }}"/>
                {% endif %}
            </div>
        
            {% if formPhoto is defined %}
                {{ form(formPhoto) }}
            {% endif %}
        </div>
    </div>

</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>
    
    var affiche = true;

    for (var i = 1; i <= 6; i++) {

        if ($('.boite-photo:nth-of-type('+i+')').data('url') != 'n/a' && affiche) {

            $('.boite-photo:nth-of-type('+i+')').css('display', 'block');

        };

        if ($('.boite-photo:nth-of-type('+i+')').data('url') == 'n/a' && affiche) {

            $('.boite-photo:nth-of-type('+i+')').css('display', 'block');
            affiche = false;

        };
    }

    $('.boite-photo').click(function() {
        
        var idN = $(this).data('id-photo');
        var idS = idN.toString();

        $('#nsp_articlebundle_photo_id').val(''+ idS+'');

        $('#nsp_articlebundle_photo_file').click();

        verify();

    });

    function verify() {

        if ($('#nsp_articlebundle_photo_file').get(0).files.length != 0) {
            
            $('#nsp_articlebundle_photo_save').click();
            $('#nsp_articlebundle_photo_file').val('');
            $('#nsp_articlebundle_photo_id').val('');
        }
        window.requestAnimationFrame(verify);
    }
    


</script>

{% endblock %}


